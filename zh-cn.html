<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
	<title>UTF-8 Everywhere</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<link rel="stylesheet" type="text/css" href="data/style.css"/>
	<link rel="stylesheet" type="text/css" href="data/zh.css"/>
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
</head>
<body>
<div class="topDiv">
<h1><a class="aId" href="index.html#">UTF-8 éåœ°å¼€èŠ±</a></h1>
<p class="subtitle">å®£è¨€</p>

<h2 id="intro"><a class="aId" href="index.html#intro">æœ¬æ–‡çš„ç›®çš„</a></h2>

<aside class="rightFloater">æœ¬æ–‡æ¡£åŒ…å«ç‰¹æ®Šå­—ç¬¦ã€‚è‹¥ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒæ¸²æŸ“ï¼Œå¯èƒ½ä¼šæ˜¾ç¤ºä¸ºé—®å·ã€æ–¹æ¡†æˆ–è€…å…¶ä»–ç¬¦å·ã€‚</aside>

<p>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ä¿ƒè¿› UTF-8 ç¼–ç çš„ä½¿ç”¨å’Œæ”¯æŒï¼Œå¹¶æ¨å¹¿å®ƒæˆä¸ºå†…å­˜ã€ç£ç›˜å­˜å‚¨å’Œé€šè®¯ç­‰ç”¨é€”çš„é»˜è®¤æ–‡æœ¬å­—ç¬¦ä¸²ç¼–ç ã€‚æˆ‘ä»¬ç›¸ä¿¡ï¼Œè¿™ç§åšæ³•å¯ä»¥æé«˜æ€§èƒ½ï¼Œé™ä½è½¯ä»¶çš„å¤æ‚æ€§ï¼Œå¹¶æœ‰åŠ©äºé¿å…å¤šç§ Unicode ç›¸å…³çš„ bugã€‚æˆ‘ä»¬å»ºè®® Unicodeï¼ˆæˆ–å¹¿ä¹‰æ¥è¯´ï¼Œæ‰€æœ‰æ–‡æœ¬ï¼‰çš„å…¶ä»–ç¼–ç æ–¹å¼åªåº”è¯¥ç”¨äºå°‘é‡éœ€è¦æ€§èƒ½ä¼˜åŒ–çš„æƒ…å†µï¼Œä¸»æµç”¨æˆ·åº”å½“é¿å…æ¥è§¦ã€‚</p>

<p>ä¸€ä¸ªå…·ä½“çš„ä¾‹å­æ˜¯éå¸¸æµè¡Œçš„ UTF-16 ç¼–ç ï¼ˆåœ¨ Windows ä¸–ç•Œå¸¸å¸¸è¯¯ç§°ä¸ºâ€œå®½å­—ç¬¦â€æˆ–å¹²è„†ç§°ä¸ºâ€œUnicodeâ€ï¼‰ã€‚æˆ‘ä»¬è®¤ä¸ºå®ƒé™¤äº†åœ¨ ICU ä¹‹ç±»çš„ä¸“ç”¨æ–‡æœ¬å¤„ç†åº“ä¸­å¯ä»¥ä½¿ç”¨ä»¥å¤–ï¼Œä¸åº”è¯¥åœ¨å…¶ä»–ç¨‹åºåº“çš„ API ä¸­æœ‰ä¸€å¸­ä¹‹åœ°ã€‚</p>

<p>æœ¬æ–‡è¿˜å»ºè®®é€‰æ‹© UTF-8 ä½œä¸º Windows åº”ç”¨ç¨‹åºå†…éƒ¨çš„å­—ç¬¦ä¸²è¡¨ç¤ºæ–¹å¼ï¼Œå°½ç®¡ç”±äºåŸç”Ÿ API ä¸æ”¯æŒ UTF-8 å’Œå†å²åŸå› å¯¼è‡´è¿™ç§åšæ³•å¾ˆå†·é—¨ã€‚æˆ‘ä»¬è®¤ä¸ºï¼Œå³ä½¿åœ¨è¿™ä¸ªå¹³å°ä¸Šï¼Œæœ¬æ–‡æ‰€è¿°è®ºç‚¹çš„å¥½å¤„ä¾æ—§èƒœè¿‡ç¼ºä¹åŸç”Ÿæ”¯æŒçš„æ‰€å¸¦æ¥çš„åå¤„ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å»ºè®®æ°¸è¿œæŠ›å¼ƒâ€œANSI ä»£ç é¡µâ€ç­‰æ¦‚å¿µï¼Œå› ä¸ºç”¨æˆ·åº”å½“æ‹¥æœ‰åœ¨ä»»ä½•æ–‡æœ¬å­—ç¬¦ä¸²ä¸­æ··ç”¨ä»»ä½•æ•°é‡çš„è¯­è¨€çš„æƒåˆ©ã€‚</p>

<p>åœ¨æ•´ä¸ªè¡Œä¸šä¸­ï¼Œè®¸å¤šæœ¬åœ°åŒ–ç›¸å…³çš„ bug éƒ½å¯<a href="http://www.joelonsoftware.com/articles/Unicode.html">å½’å’äº</a>ç¨‹åºå‘˜å¯¹ Unicode ç¼ºä¹è®¤çŸ¥ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬ç›¸ä¿¡ä¸€ä¸ªä¸æ˜¯ä¸“æ³¨äºæ–‡æœ¬æœ¬èº«çš„åº”ç”¨ç¨‹åºï¼Œç†åº”æœ‰ç€å¯ä»¥æ— è§†ç¼–ç é—®é¢˜çš„æ¶æ„ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæ–‡ä»¶å¤åˆ¶ç¨‹åºä¸åº”è¯¥å†™ä¸åŒçš„ä»£ç æ¥æ”¯æŒéè‹±è¯­æ–‡ä»¶åã€‚åœ¨è¿™ä»½å®£è¨€ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå°†è§£é‡Šï¼Œç¨‹åºå‘˜å¦‚æœä¸æƒ³å…³å¿ƒ Unicode çš„æ‰€æœ‰å¤æ‚ç»†èŠ‚æˆ–è€…<a href="index.html#cookie">å­—ç¬¦ä¸²å†…æœ‰ä»€ä¹ˆ</a>ï¼Œåº”è¯¥åšå“ªäº›äº‹æƒ…ã€‚</p>

<p>æ­¤å¤–ï¼Œæˆ‘ä»¬æƒ³è¡¨æ˜ï¼Œåœ¨æ–‡æœ¬å¤„ç†åœºæ™¯ä¸­ï¼Œä¸åº”è¿‡åˆ†çœ‹é‡å¯¹ Unicode ç ä½çš„è®¡æ•°å’Œéå†ã€‚è®¸å¤šå¼€å‘è€…é”™è¯¯åœ°è®¤ä¸ºç ä½å°±æ˜¯ ASCII å­—ç¬¦çš„å‡çº§ç‰ˆã€‚è¿™äº§ç”Ÿäº†å¦‚ Python å­—ç¬¦ä¸²çš„ O(1) ç ä½è®¿é—®ä¹‹ç±»çš„è½¯ä»¶è®¾è®¡å†³ç­–ã€‚ä½†äº‹å®å´æ˜¯ï¼ŒUnicode æœ¬è´¨ä¸Šæ›´ä¸ºå¤æ‚ï¼Œ<em>Unicode å­—ç¬¦</em>è¿™ä¸ªæ¦‚å¿µæ²¡æœ‰ç»Ÿä¸€çš„å®šä¹‰ã€‚æˆ‘ä»¬è®¤ä¸ºæ²¡æœ‰ç‰¹åˆ«çš„ç†ç”±æŠŠå®ƒå®šä¹‰ä¸º Unicode ç ä½ï¼Œè€Œä¸æ˜¯ Unicode å­—ç´ ç¾¤ã€ç¼–ç å•å…ƒï¼Œæˆ–ç”šè‡³æ˜¯ä¸€äº›è¯­è¨€çš„è¯è¯­ã€‚å¦ä¸€æ–¹é¢ï¼ŒæŠŠ UTF-8 çš„ç¼–ç å•å…ƒï¼ˆå­—èŠ‚ï¼‰ä½œä¸ºæ–‡æœ¬çš„åŸºæœ¬å•å…ƒä¼¼ä¹å¾ˆæœ‰ç”¨ï¼Œæ¯”å¦‚åœ¨è§£æå¸¸ç”¨çš„æ–‡æœ¬æ•°æ®æ ¼å¼æœ‰ä¼˜åŠ¿ã€‚UTF-8 çš„ç‰¹æ€§é€ å°±äº†è¿™ä¸ªç»“æœã€‚å­—ç´ ã€ç¼–ç å•å…ƒã€ç ä½ç­‰ Unicode ç›¸å…³çš„æœ¯è¯­å°†åœ¨<a href="index.html#characters">ç¬¬ 5 èŠ‚</a>ä¸­è§£é‡Šã€‚å¯¹å·²ç¼–ç çš„æ–‡æœ¬å­—ç¬¦ä¸²è¿›è¡Œæ“ä½œå°†åœ¨<a href="index.html#textops">ç¬¬ 7 èŠ‚</a>ä¸­è®¨è®ºã€‚</p>

<h2 id="background"><a class="aId" href="index.html#background">èƒŒæ™¯</a></h2>

<p>1988 å¹´ï¼ŒJoseph D. Becker å‘å¸ƒäº†<a href="http://unicode.org/history/unicode88.pdf">ç¬¬ä¸€ä¸ª Unicode æè®®è‰æ¡ˆ</a>ã€‚ä»–çš„è®¾è®¡å¤©çœŸåœ°å»ºç«‹åœ¨ 16 æ¯”ç‰¹å°±è¶³å¤Ÿè¡¨ç¤ºä¸€ä¸ªå­—ç¬¦çš„å‡è®¾ä¸Šã€‚1991 å¹´ï¼ŒUnicode æ ‡å‡†ï¼ˆåˆåâ€œç»Ÿä¸€ç â€ã€â€œä¸‡å›½ç â€ï¼‰çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬å‘å¸ƒï¼Œä½†é™åˆ¶ç ä½ä¸º 16 æ¯”ç‰¹é•¿ã€‚åœ¨éšåçš„å‡ å¹´é‡Œï¼Œè®¸å¤šç³»ç»Ÿéƒ½å¢åŠ äº† Unicode æ”¯æŒï¼Œå¹¶åˆ‡æ¢åˆ°äº† UCS-2 ç¼–ç ã€‚Unicode å°¤å…¶å¸å¼•å½“æ—¶çš„æ–°æŠ€æœ¯ï¼Œå¦‚ Qt æ¡†æ¶ï¼ˆ1992ï¼‰ã€Windows NT 3.1ï¼ˆ1993ï¼‰ä¸ Javaï¼ˆ1995ï¼‰ã€‚</p>

<p>ç„¶è€Œï¼Œäººä»¬å¾ˆå¿«å‘ç°æ¯ä¸ªå­—ç¬¦ 16 æ¯”ç‰¹å¹¶ä¸èƒ½æ»¡è¶³ Unicode çš„éœ€æ±‚ã€‚1996å¹´ï¼Œä¸ºäº†ç¡®ä¿ç°æœ‰çš„ç³»ç»Ÿå¯ä»¥æ”¯æŒé 16 æ¯”ç‰¹çš„å­—ç¬¦ï¼Œäººä»¬å‘æ˜äº† UTF-16ã€‚ä½†æ˜¯ï¼Œå®ƒæ°æ°åç¦»äº†é€‰æ‹© 16 æ¯”ç‰¹å®šé•¿ç¼–ç çš„åˆè¡·ã€‚ç›®å‰ï¼ŒUnicode æ”¶å½•äº†è¶…è¿‡ 109449 ä¸ªå­—ç¬¦ï¼Œå…¶ä¸­å¤§çº¦æœ‰ 74500 ä¸ªä¸­æ—¥éŸ©è¡¨æ„æ–‡å­—ã€‚</p>

<div style="text-align:center">
	<img src="data/nagoya-museum.jpg" style="text-align: center; max-width: 100%; width: 480px;" alt="ä¸€ä¸ªå°å­©åœ¨ä»¥æ–‡å­—ç¼–ç ä¸ºä¸»é¢˜çš„æµ·æŠ¥å‰ç©ç¼–ç æ¸¸æˆã€‚"/>
	<div style="margin:1ex;" class="fangsong">åå¤å±‹å¸‚ç§‘å­¦é¦†ã€‚Vadim Zlotnik æ‘„ã€‚</div>
</div>

<p>å¾®è½¯ç»å¸¸è¯¯æŠŠâ€œUnicodeâ€å’Œâ€œå®½å­—ç¬¦â€ä½œä¸ºâ€œUCS-2â€å’Œâ€œUTF-16â€çš„ä»£åè¯ã€‚æ­¤å¤–ï¼Œç”±äº Windows API ä¸èƒ½æ¥å— UTF-8 çª„å­—ç¬¦ä¸²ï¼Œäººä»¬å¿…é¡»ä½¿ç”¨ <code>UNICODE</code> é¢„å®šä¹‰å¸¸é‡æ¥ç¼–è¯‘ä»£ç ã€‚å¾®è½¯æ•™è‚² Windows çš„ C++ ç¨‹åºå‘˜å¿…é¡»ç”¨â€œå®½å­—ç¬¦â€æ¥å¤„ç† Unicodeï¼ˆæ›´æœ‰ç”šè€…ï¼Œç”¨ TCHARï¼Œæ¥è®©ç¨‹åºå‘˜é€šè¿‡æ”¹å˜ç¼–è¯‘å™¨è®¾å®šæ¥é€‰æ‹©æ˜¯å¦å¹²è„†å®Œå…¨ä¸æ”¯æŒ Unicodeï¼‰ã€‚è¿™æ ·çš„æ··ä¹±è®©è®¸å¤š Windows ç¨‹åºå‘˜å›°æƒ‘ï¼Œåˆ°åº•åº”è¯¥æ€æ ·æ‰èƒ½æ­£ç¡®å¤„ç†æ–‡æœ¬ã€‚</p>

<p>ä¸æ­¤åŒæ—¶ï¼Œåœ¨ Linux å’Œ Web ä¸–ç•Œï¼Œå¤§å®¶é»˜è®¸äº† Unicode çš„æœ€ä½³ç¼–ç æ˜¯ UTF-8ã€‚å³ä½¿å®ƒæ¯”èµ·å…¶ä»–æ–‡æœ¬æ›´èƒ½ç®€çŸ­åœ°è¡¨ç¤ºè‹±è¯­å’Œè®¡ç®—æœºè¯­è¨€ï¼ˆå¦‚ C++ã€HTMLã€XML ç­‰ï¼‰ï¼Œå¯¹äºå¸¸ç”¨å­—ç¬¦é›†ï¼Œå®ƒå´å‡ ä¹ä¸é€Šè‰²äº UTF-16ã€‚</p>

<h2 id="facts"><a class="aId" href="index.html#facts">å¸¸è¯†</a></h2>

<ul>
	<li>åœ¨ UTF-8 å’Œ UTF-16 ç¼–ç é‡Œï¼Œä¸€ä¸ªç ä½æœ€å¤šéƒ½è¦å  4 ä¸ªå­—èŠ‚ã€‚</li>

	<li>UTF-8 ä¸ç«¯åºæ— å…³ã€‚UTF-16 æœ‰ä¸¤ç§ç«¯åºï¼šUTF-16LE å’Œ UTF-16BEï¼ˆåˆ†åˆ«æ˜¯å°ç«¯åºå’Œå¤§ç«¯åºï¼‰ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬ç»Ÿç§°ä¸º UTF-16ã€‚</li>

	<li>å®½å­—ç¬¦åœ¨æŸäº›å¹³å°ä¸Šå  2 ä¸ªå­—èŠ‚ï¼Œå¦ä¸€äº›å¹³å°ä¸Šå  4 ä¸ªå­—èŠ‚ã€‚</li>

	<li>å¯¹ UTF-8 å’Œ UTF-32 å­—ç¬¦ä¸²æ’åºå¯ä»¥å¾—åˆ°å’Œå­—å…¸åºç›¸åŒçš„ç»“æœï¼ŒUTF-16 åˆ™ä¸èƒ½ã€‚ï¼ˆè¯‘è€…æ³¨ï¼šUnicode ç ä½çš„æ±‰å­—æ’åºæ˜¯åº·ç†™å­—å…¸åºï¼Œè€Œä¸æ˜¯æ–°åå­—å…¸åºã€‚Unihan æ•°æ®åº“å¯ç”¨äºå®ç°æ‹¼éŸ³æ’åºï¼‰</li>

	<li>UTF-8 å¯ä»¥é«˜æ•ˆè¡¨ç¤ºè‹±æ–‡å­—æ¯å’Œå…¶ä»– ASCII å­—ç¬¦ï¼ˆæ¯å­—ç¬¦ä¸€ä¸ªå­—èŠ‚ï¼‰ï¼Œè€Œ UTF-16 åªå¯¹ä¸€éƒ¨åˆ†äºšæ´²å­—ç¬¦é›†æœ‰åˆ©ï¼ˆåªéœ€ 2 å­—èŠ‚ï¼ŒUTF-8 éœ€è¦ 3 å­—èŠ‚ï¼‰ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ Web ä¸–ç•Œæœ€å–œå¥½ UTF-8 çš„åŸå› ã€‚è‹±è¯­ä¹¦å†™çš„ HTML/XML æ ‡ç­¾æºæ‚äº†ä»»ä½•è¯­è¨€çš„æ­£æ–‡æ–‡æœ¬ã€‚è¥¿é‡Œå°”è¯­ã€å¸Œä¼¯æ¥è¯­ç­‰å…¶ä»–å‡ ä¸ªå¸¸ç”¨ Unicode åŒºå—åœ¨ UTF-16 å’Œ UTF-8 éƒ½å  2 ä¸ªå­—èŠ‚ã€‚</li>

	<li>UTF-16 ç»å¸¸è¢«è¯¯ä»¥ä¸ºæ˜¯å®šé•¿ç¼–ç ï¼Œå³ä½¿æ˜¯ Windows è‡ªå¸¦çš„ç¨‹åºä¹Ÿå¦‚æ­¤ï¼šWindowsï¼ˆVista ä¹‹å‰ï¼‰çš„çº¯æ–‡æœ¬ç¼–è¾‘æ§ä»¶ä¸­ï¼Œå  4 ä¸ªå­—èŠ‚çš„ UTF-16 å­—ç¬¦éœ€è¦æŒ‰ä¸¤ä¸‹é€€æ ¼é”®æ‰èƒ½åˆ æ‰ã€‚åœ¨ Windows 7 ä¸­ï¼Œæ§åˆ¶å°æŠŠæ­¤ç±»å­—ç¬¦æ˜¾ç¤ºæˆä¸¤ä¸ªä¹±ç å­—ï¼Œæ— è®ºé€‰æ‹©ä»€ä¹ˆå­—ä½“ã€‚</li>

	<li>è®¸å¤šé€‚ç”¨äº Windows çš„ç¬¬ä¸‰æ–¹åº“ä¸æ”¯æŒ Unicodeï¼šå®ƒä»¬æ¥å—çª„å­—ç¬¦ä¸²å‚æ•°ï¼Œç„¶åä¼ é€’ç»™ ANSI APIã€‚æœ‰æ—¶ç”šè‡³æ–‡ä»¶åä¹Ÿæ˜¯å¦‚æ­¤ã€‚è¿™ç§é—®é¢˜é€šå¸¸æ— è§£ï¼Œå› ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²å¯èƒ½æ— æ³•åœ¨ä»»ä½• ANSI ä»£ç é¡µå®Œæ•´è¡¨ç¤ºï¼ˆå¦‚æœå®ƒåŒ…å« Unicode å„ä¸ªåŒºå—çš„å¤§æ‚çƒ©ï¼‰ã€‚Windows ç¨‹åºå‘˜ä¸€èˆ¬ä¼šå»æŸ¥è¯¢è¿™ä¸ªæ–‡ä»¶ï¼ˆå¦‚æœå·²ç»å­˜åœ¨ï¼‰çš„ 8.3 DOS çŸ­æ–‡ä»¶åæ¥ä¼ é€’ç»™è¿™æ ·çš„åº“ã€‚å¦‚æœè¦åˆ›å»ºä¸€ä¸ªä¸å­˜åœ¨çš„æ–‡ä»¶ï¼Œæˆ–è€… 8.3 è·¯å¾„é•¿åº¦è¶…è¿‡äº† <code>MAX_PATH</code>ï¼Œåˆæˆ–è€…æ“ä½œç³»ç»Ÿè®¾å®šé‡Œç¦ç”¨äº†çŸ­æ–‡ä»¶åçš„ç”Ÿæˆï¼Œé‚£å°±æ— æ³•å®ç°äº†ã€‚</li>

	<li>åœ¨ C++ ä¸­ï¼Œ<code>std::exception::what()</code> åªèƒ½ç”¨ UTF-8 ç¼–ç æ¥è¿”å› Unicodeã€‚<code>localeconv</code> åªæœ‰ä½¿ç”¨ UTF-8 æ‰èƒ½æ”¯æŒ Unicodeã€‚</li>

	<li>UTF-16 åœ¨ä»Šå¤©ä»ç„¶æµè¡Œï¼Œå³ä½¿æ˜¯åœ¨ Windows ä¸–ç•Œä»¥å¤–ã€‚ Qtã€Javaã€C#ã€Pythonï¼ˆCPython å‚è€ƒå®ç° 3.3 ç‰ˆæœ¬ä¹‹å‰ï¼Œ<a href="index.html#faq.python">è§ä¸‹æ–‡</a>ï¼‰ä»¥åŠ <a href="http://en.wikipedia.org/wiki/International_Components_for_Unicode">ICU</a>ï¼Œå†…éƒ¨éƒ½ä½¿ç”¨ UTF-16 æ¥è¡¨ç¤ºå­—ç¬¦ä¸²ã€‚</li>
</ul>


<h2 id="cookie"><a class="aId" href="index.html#cookie">ä¸é€æ˜æ•°æ®å‚æ•°</a></h2>

<p>æˆ‘ä»¬å†è°ˆæ–‡ä»¶å¤åˆ¶ç¨‹åºã€‚åœ¨ UNIX ä¸–ç•Œé‡Œï¼Œå‡ ä¹æ‰€æœ‰çª„å­—ç¬¦ä¸²éƒ½é»˜è®¤æ˜¯ UTF-8ã€‚æ­£å› å¦‚æ­¤ï¼Œæ–‡ä»¶å¤åˆ¶ç¨‹åºçš„ä½œè€…å¹¶ä¸éœ€è¦åœ¨æ„ Unicodeã€‚å› ä¸ºå‚æ•°æ˜¯ä½œä¸ºä¸é€æ˜æ•°æ®ï¼Œå³ <a href="http://en.wikipedia.org/wiki/Opaque_data_type">cookie</a>ï¼Œæ‰€ä»¥åªè¦ç”¨ ASCII å­—ç¬¦ä¸²ä½œä¸ºæ–‡ä»¶åå‚æ•°æµ‹è¯•æˆåŠŸï¼Œç¨‹åºå°±è‡ªåŠ¨æ”¯æŒäº†ä»»ä½•è¯­è¨€çš„æ–‡ä»¶åã€‚æ–‡ä»¶å¤åˆ¶ç¨‹åºçš„ä»£ç ä¸éœ€è¦åš<em>ä»»ä½•</em>æ”¹åŠ¨å°±èƒ½æ”¯æŒå¤–å›½è¯­è¨€ã€‚<code>fopen()</code> å‡½æ•°å®Œç¾æ”¯æŒ Unicodeï¼Œ<code>argv</code> äº¦ç„¶ã€‚</p>

<p>ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹ Microsoft Windowsï¼ŒåŸºäº UTF-16 æ¶æ„ï¼Œæ˜¯æ€ä¹ˆåšçš„ã€‚ä½¿æ–‡ä»¶æ‹·è´ç¨‹åºæ”¯æŒå¤šä¸ª Unicode åŒºå—çš„å¤§æ‚çƒ©ï¼ˆå¤šè¯­ç§æ··åˆï¼‰éœ€è¦ä¸€äº›å¥‡æŠ€æ·«å·§ã€‚é¦–å…ˆï¼Œåº”ç”¨ç¨‹åºå¿…é¡»åœ¨ç¼–è¯‘æ—¶æ‰“å¼€ Unicode æ”¯æŒã€‚è¿™æ ·çš„è¯ï¼Œç¨‹åºä¸èƒ½æœ‰ C è¯­è¨€æ ‡å‡†å½¢å‚çš„ <code>main()</code> å‡½æ•°ã€‚å®ƒå¾—èƒ½æ¥å— UTF-16 ç¼–ç çš„ <code>argv</code>ã€‚è¦æŠŠä¸€ä¸ªæœ¬ä¸ºçª„å­—ç¬¦ä¸²å†™çš„ Windows ç¨‹åºæ”¹é€ æˆæ”¯æŒ Unicodeï¼Œå¼€å‘è€…éœ€è¦æ·±åº¦é‡æ„ï¼Œç…§é¡¾å¥½æ¯ä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡ã€‚</p>

<p>MSVC è‡ªå¸¦çš„æ ‡å‡†åº“å¯¹ Unicode æ”¯æŒå¾—å¾ˆç³Ÿç³•ã€‚å®ƒæŠŠçª„å­—ç¬¦ä¸²å‚æ•°ç›´æ¥ä¼ é€’åˆ°æ“ä½œç³»ç»Ÿçš„ ANSI APIï¼Œæ²¡åŠæ³•é‡è½½ã€‚æ”¹å˜ <code>std::locale</code> ä¹Ÿæ²¡ç”¨ã€‚æ²¡æ³•ç”¨ C++ çš„æ ‡å‡†ç‰¹æ€§æ¥æ‰“å¼€ Unicode æ–‡ä»¶åçš„æ–‡ä»¶ã€‚æ‰“å¼€æ–‡ä»¶çš„æ ‡å‡†æ–¹æ³•æ˜¯ï¼š</p>

<pre><code>std::fstream fout(&quot;abc.txt&quot;);</code></pre>

<p>è§£å†³è¿™ä¸ªé—®é¢˜çš„æ­£ç¡®æ–¹æ³•æ˜¯ç”¨å¾®è½¯è‡ªå·±å‘æ˜çš„è¡¥æ•‘æ–¹æ³•æ¥æ¥å—å®½å­—ç¬¦ä¸²å‚æ•°ï¼Œè€Œè¿™æ˜¯ä¸€ä¸ªéæ ‡å‡†æ‰©å±•ã€‚</p>

<p>åœ¨ Windows ä¸­ï¼Œ<code>HKLM\SYSTEM\CurrentControlSet\Control\Nls\CodePage\ACP</code> æ³¨å†Œè¡¨é”®å¯ä»¥å…è®¸ ANSI API æ”¯æŒé ASCII å­—ç¬¦ï¼Œä½†æ˜¯åªèƒ½é€‰æ‹©ä¸€ä¸ªå›ºå®šçš„ ANSI ä»£ç é¡µã€‚æˆ–è®¸ 65001 å€¼å¯ä»¥è§£å†³ Windows çš„ cookie é—®é¢˜ï¼Œç„¶è€Œå¾®è½¯æ²¡å®ç°å®ƒã€‚å¦‚æœå¾®è½¯å®ç°äº†è¿™ä¸ª <abbr title="ANSI Code Page, ANSI ä»£ç é¡µ">ACP</abbr> å€¼ï¼Œå°±èƒ½å¤Ÿåœ¨ Windows å¹³å°ä¸Šä¿ƒè¿› UTF-8 çš„å¹¿æ³›æ¥å—ã€‚</p>

<p>å¯¹äº Windows ç¨‹åºå‘˜å’Œè·¨å¹³å°åº“å‚å•†ï¼Œæˆ‘ä»¬å°†åœ¨â€œ<a href="index.html#windows">å¦‚ä½•åœ¨ Windows ä¸Šå¤„ç†æ–‡æœ¬</a>â€ä¸€èŠ‚ä¸­è®¨è®ºæˆ‘ä»¬æå‡ºçš„å¤„ç†æ–‡æœ¬å­—ç¬¦ä¸²å’Œé‡æ„ç¨‹åºã€å¢å¼º Unicode æ”¯æŒçš„åŠæ³•ã€‚</p>


<h2 id="characters"><a class="aId" href="index.html#characters">å­—å½¢ã€å­—ç´ ç¾¤å’Œå…¶ä»– Unicode æ¦‚å¿µ</a></h2>
	<p>è¿™é‡Œæ˜¯æ ¹æ® Unicode æ ‡å‡†ï¼Œå¯¹å­—ç¬¦ã€ç ä½ã€ç¼–ç å•å…ƒå’Œå­—ç´ ç¾¤ä¹‹å®šä¹‰çš„æ‘˜å½•ã€‚å»ºè®®å‚è€ƒ Unicode æ ‡å‡†ç›¸å…³ç« èŠ‚çš„è¯¦ç»†è¯´æ˜ã€‚</p>

	<aside class="rightFloater"><p class="display" style="font-size:1.5em">ĞŸÑ€Ğ¸Ğ²ĞµÌÑ‚ à¤¨à¤®à¤¸à¥à¤¤à¥‡ ×©Ö¸××œ×•Ö¹×</p><p>ä½ çœ‹åˆ°äº†å‡ ä¸ª<em>å­—ç¬¦</em>ï¼Ÿ</p></aside>

	<dl>
		<dt>ç ä½ (Code point)</dt>
		<dd>Unicode ç¼–ç ç©ºé—´çš„ä»»ä½•æ•°å€¼ã€‚<sup>[Â§3.4, D10]</sup> ä¾‹å¦‚ï¼šU+3243Fã€‚</dd>

		<dt>ç¼–ç å•å…ƒ (Code unit)</dt>
		<dd>å¯ä»¥è¡¨ç¤ºä¸€æ®µå·²ç¼–ç æ–‡æœ¬çš„æœ€å°æ¯”ç‰¹ç»„åˆã€‚<sup>[Â§3.9, D77]</sup> ä¾‹å¦‚ï¼ŒUTF-8ã€UTF-16 å’Œ UTF-32 åˆ†åˆ«ä½¿ç”¨ 8 æ¯”ç‰¹ã€16 æ¯”ç‰¹å’Œ 32 æ¯”ç‰¹ç¼–ç å•å…ƒã€‚ä¸Šè¿°ç ä½å¯ä»¥ç¼–ç æˆå››ä¸ª UTF-8 ç¼–ç å•å…ƒâ€œ<code>f0 b2 90 bf</code>â€ï¼Œä¸¤ä¸ª UTF-16 ç¼–ç å•å…ƒâ€œ<code>d889 dc3f</code>â€ï¼Œä¸€ä¸ª UTF-32 ç¼–ç å•å…ƒâ€œ<code>0003243f</code>â€ã€‚è¯·æ³¨æ„ï¼Œè¿™ä»…ä»…æ˜¯<em>ä¸€ç»„æ¯”ç‰¹</em>åºåˆ—ï¼›å®ƒä»¬å­˜å‚¨åœ¨é¢å‘å­—èŠ‚çš„åª’ä½“ä¸Šçš„æ–¹å¼å–å†³äºç‰¹å®šç¼–ç çš„ç«¯åºã€‚å½“å­˜å‚¨ä¸Šè¿° UTF-16 ç ä½æ—¶ï¼ŒUTF-16BE ä¼šè½¬æ¢ä¸ºâ€œ<code>d8 89 dc 3f</code>â€ï¼ŒUTF-16LE ä¼šè½¬æ¢ä¸ºâ€œ<code>89 d8 3f dc</code>â€ã€‚</dd>

		<dt>æŠ½è±¡å­—ç¬¦ (Abstract character)</dt>
		<dd>
			<p>ä¸€ä¸ªç”¨äºç»„ç»‡ã€æ§åˆ¶æˆ–è¡¨ç¤ºæ–‡å­—æ•°æ®çš„ä¿¡æ¯å•å…ƒã€‚<sup>[Â§3.4, D7]</sup> è¯¥æ ‡å‡†åœ¨ 3.1 èŠ‚è¿›ä¸€æ­¥è¯´é“ï¼š</p>

			<blockquote><p>å¯¹äº Unicode æ ‡å‡†ï¼Œ[...] æ”¶å½•æœ¬èº«æ˜¯å¼€æ”¾çš„ã€‚å› ä¸º Unicode æ˜¯ä¸€ç§é€šç”¨ç¼–ç ï¼Œä»»ä½•æŠ½è±¡å­—ç¬¦åªè¦èƒ½è¢«ç¼–ç ï¼Œå°±å¯èƒ½æˆä¸ºç¼–ç çš„å€™é€‰ï¼Œæ— è®ºè¿™ä¸ªå­—ç¬¦æ˜¯å¦å·²çŸ¥ã€‚</p></blockquote>

			<p>è¿™ä¸ªå®šä¹‰çš„ç¡®å¾ˆæŠ½è±¡ã€‚åªè¦æ˜¯äººèƒ½æƒ³åˆ°çš„ä»»ä½•å­—ç¬¦ï¼Œå°±<em>æ˜¯</em>ä¸€ä¸ªæŠ½è±¡å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œ<img src="data/glyph-ungwe.png" style="vertical-align: -1ex" alt=""/> <em>ç²¾çµè¯­ tengwar å­—æ¯ ungwe</em> æ˜¯ä¸€ä¸ªæŠ½è±¡çš„å­—ç¬¦ï¼Œè™½ç„¶å®ƒå°šä¸èƒ½ç”¨ Unicode è¡¨ç¤ºã€‚</p>
		</dd>

		<dt>å·²ç¼–ç å­—ç¬¦ (Encoded character, Coded character)</dt>
		<dd>
			<p>ç ä½å’ŒæŠ½è±¡å­—ç¬¦ä¹‹é—´çš„æ˜ å°„ã€‚<sup>[Â§3.4, D11]</sup> ä¾‹å¦‚ï¼ŒU+1F428 æ˜¯ä¸€ä¸ªä»£è¡¨æŠ½è±¡å­—ç¬¦ ğŸ¨ <span class="uniname">è€ƒæ‹‰</span>çš„å·²ç¼–ç å­—ç¬¦ã€‚</p>

			<p>è¿™ç§æ˜ å°„æ˜¯æ—¢ä¸æ˜¯åŒå°„ï¼Œä¹Ÿä¸æ˜¯å•å°„ï¼Œæ›´ä¸æ˜¯æ»¡å°„ï¼š</p>

			<ul>
				<li>ä»£ç†å­—ç¬¦ï¼ˆsurrogateï¼‰ï¼Œéå­—ç¬¦ï¼ˆnoncharacterï¼‰å’Œæœªåˆ†é…çš„ç ä½å®Œå…¨ä¸å¯¹åº”æŠ½è±¡å­—ç¬¦ã€‚</li>
				<li>ä¸€äº›æŠ½è±¡å­—ç¬¦å¯ä»¥ç”±ä¸åŒçš„ç ä½è¿›è¡Œç¼–ç ï¼›U+03A9 <span class="uniname">å¸Œè…Šå¤§å†™å­—æ¯ omega</span> å’Œ U+2126 <span class="uniname">æ¬§å§†ç¬¦å·</span> éƒ½å¯¹åº”äºåŒä¸€ä¸ªæŠ½è±¡å­—ç¬¦â€œÎ©â€ï¼Œ<em>å¿…é¡»åŒç­‰å¯¹å¾…</em>ã€‚</li>
				<li>ä¸€äº›æŠ½è±¡å­—ç¬¦æ— æ³•ç”¨å•ä¸ªç ä½è¿›è¡Œç¼–ç ï¼Œè¦ç”¨å·²ç¼–ç å­—ç¬¦çš„<em>åºåˆ—</em>æ‰èƒ½è¡¨ç¤ºå®ƒä»¬ã€‚ä¾‹å¦‚ï¼Œè¡¨ç¤ºæŠ½è±¡å­—ç¬¦ ÑÌ <em>å¸¦é”éŸ³ç¬¦çš„è¥¿é‡Œå°”å°å†™å­—æ¯ yu</em> çš„å”¯ä¸€æ–¹æ³•æ˜¯ä½¿ç”¨ U+044E <span class="uniname">è¥¿é‡Œå°”å°å†™å­—æ¯ yu</span> å’Œ U+0301 <span class="uniname">ç»„åˆé”éŸ³ç¬¦</span> è¿™ä¸ªåºåˆ—ã€‚</li>
			</ul>

			<p>æ­¤å¤–ï¼Œä¸€äº›æŠ½è±¡å­—ç¬¦ä¸ä»…æœ‰å•ç ä½è¡¨ç¤ºæ–¹æ³•ï¼Œ<em>è¿˜æœ‰</em>å¤šç ä½è¡¨ç¤ºæ–¹æ³•ã€‚æŠ½è±¡å­—ç¬¦ Çµ å¯ä»¥ç”¨å•ä¸€ç ä½ U+01F5 <span class="uniname">å¸¦é”éŸ³ç¬¦çš„æ‹‰ä¸å°å†™å­—æ¯ g</span> ç¼–ç ï¼Œæˆ–è€…ç”¨ &lt;U+0067 <span class="uniname">æ‹‰ä¸å°å†™å­—æ¯ g</span>, U+0301 <span class="uniname">ç»„åˆé”éŸ³ç¬¦</span>&gt; è¿™ä¸ªåºåˆ—ã€‚</p>
		</dd>

		<dt>ç”¨æˆ·è§‚æ„Ÿå­—ç¬¦ (User-perceived character)</dt>
		<dd>ä»»ä½•æœ€ç»ˆç”¨æˆ·æ‰€è®¤ä¸ºçš„å­—ç¬¦ã€‚è¿™ä¸ªæ¦‚å¿µä¸è¯­è¨€æœ‰å…³ã€‚ä¾‹å¦‚ï¼Œâ€œchâ€åœ¨è‹±è¯­å’Œæ‹‰ä¸æ–‡ä¸­æ˜¯ä¸¤ä¸ªå­—æ¯ï¼Œè€Œåœ¨æ·å…‹è¯­å’Œæ–¯æ´›ä¼å…‹è¯­ä¸­åˆ™æ˜¯ä¸€ä¸ªå­—æ¯ã€‚</dd>

		<dt>å­—ç´ ç¾¤ (Grapheme cluster)</dt>
		<dd>â€œåº”è¯¥æ”¾åœ¨ä¸€èµ·â€çš„å·²ç¼–ç çš„å­—ç¬¦åºåˆ—ã€‚<sup>[Â§2.11]</sup> å­—ç´ ç¾¤å¯ä»¥è¿‘ä¼¼åœ°çœ‹ä½œè¯­è¨€ä¸­ç«‹çš„ç”¨æˆ·è§‚æ„Ÿå­—ç¬¦ã€‚ä¾‹å¦‚å®ƒä»¬å¯é€‚ç”¨äºå…‰æ ‡ç§»åŠ¨å’Œé€‰æ‹©ã€‚</dd>
	</dl>

	<p>â€œå­—ç¬¦â€å¯ä»¥ä»£è¡¨ä»¥ä¸Šä»»ä½•æ¦‚å¿µã€‚Unicode æ ‡å‡†ç”¨â€œå­—ç¬¦â€ä½œä¸ºâ€œ<em>å·²ç¼–ç å­—ç¬¦</em>â€çš„åŒä¹‰è¯ã€‚<sup>[Â§3.4]</sup>
	ç¼–ç¨‹è¯­è¨€æˆ–ç¨‹åºåº“æ–‡æ¡£ä¸­çš„â€œå­—ç¬¦â€é€šå¸¸æ˜¯æŒ‡ä¸€ä¸ªç¼–ç å•å…ƒã€‚å¦‚æœé—®æœ€ç»ˆç”¨æˆ·ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­å­—ç¬¦ çš„æ•°é‡ï¼Œä»–ä¼šæ•°â€œç”¨æˆ·è§‚æ„Ÿå­—ç¬¦â€ã€‚æ ¹æ®ä¸€ä¸ªç¨‹åºå‘˜å¯¹ Unicode äº†è§£ç¨‹åº¦çš„ä¸åŒï¼Œä»–å¯èƒ½è®¤ä¸ºâ€œå­—ç¬¦â€æ˜¯ç¼–ç å•å…ƒã€ç ä½æˆ–è€…å­—ç´ ç¾¤ã€‚ä¾‹å¦‚è¿™æ˜¯ <a href="https://dev.twitter.com/docs/counting-characters">Twitter è®¡ç®—å­—ç¬¦çš„æ–¹å¼</a>ã€‚åœ¨æˆ‘ä»¬çœ‹æ¥ï¼Œä¸€ä¸ªå­—ç¬¦ä¸²é•¿åº¦å‡½æ•°å¯¹å­—ç¬¦ä¸²â€œğŸ¨â€ä¸ä¸€å®šè¦è¿”å› 1 æ‰ç®— Unicode å…¼å®¹ã€‚</p>

<h2 id="asian"><a class="aId" href="index.html#asian">äºšæ´²è¯­è¨€æ–‡æœ¬ï¼šUTF-8 ä¸ UTF-16</a></h2>
	<p>å› æ­¤ï¼Œåœ¨ UTF-8 å’Œ UTF-16 ä¸­å¤§å¤šæ•° Unicode ç ä½éƒ½å ç›¸åŒçš„å­—èŠ‚æ•°ã€‚åŒ…æ‹¬ä¿„è¯­ã€å¸Œä¼¯æ¥è¯­ã€å¸Œè…Šè¯­ï¼Œå’Œæ‰€æœ‰é BMP ç ä½åœ¨ä¸¤ç§ç¼–ç ä¸­éƒ½å äº† 2 æˆ– 4 å­—èŠ‚ã€‚UTF-16 ç¼–ç çš„æ‹‰ä¸å­—æ¯ã€ä¸€äº›æ ‡ç‚¹ç¬¦å·å’Œ ASCII ç ä¸­çš„å…¶ä»–å­—ç¬¦å äº†æ›´å¤šç©ºé—´ï¼Œè€Œ UTF-8 ç¼–ç çš„ä¸€éƒ¨åˆ†äºšæ´²å­—ç¬¦åˆ™å ç”¨äº†æ›´å¤šç©ºé—´ã€‚äºšæ´²ç¨‹åºå‘˜éš¾é“ä¸èƒ½è½¬å‚¨ UTF-16ï¼Œä»è€Œä½¿æ¯ä¸ªå­—ç†è®ºä¸ŠèŠ‚çœ 50% çš„å†…å­˜å—ï¼Ÿ</p>

	<p>äº‹å®ä¸æ˜¯è¿™æ ·ã€‚ä»…æœ‰äººå·¥æ„é€ çš„ï¼Œä¸”åªå«æœ‰ U+0800 åˆ° U+FFFF èŒƒå›´å†…çš„æ–‡æœ¬ç¤ºä¾‹ï¼Œæ‰èƒ½èŠ‚çœä¸€åŠå†…å­˜ã€‚ç„¶è€Œè®¡ç®—æœºä¹‹é—´æ–‡æœ¬æ¥å£çš„ä½¿ç”¨è¿œè¶…å…¶ä»–æ–‡æœ¬æ•°æ®çš„ç”¨é€”ã€‚è¿™åŒ…æ‹¬ XMLã€HTTPã€æ–‡ä»¶è·¯å¾„å’Œé…ç½®æ–‡ä»¶â€”â€”å®ƒä»¬å‡ ä¹éƒ½ä»…ä½¿ç”¨äº† ASCII å­—ç¬¦ã€‚è€Œä¸”äº‹å®ä¸Šï¼ŒUTF-8 åœ¨å„ä¸ªäºšæ´²å›½å®¶å¹¿ä¸ºä½¿ç”¨ã€‚</p>

	<p>åœ¨ä¸“é—¨å‚¨å­˜ä¸­æ–‡ä¹¦ç±çš„åœºåˆï¼ŒUTF-16 å¯èƒ½è¿˜æ˜¯ä¸€ç§åˆç†çš„ä¼˜åŒ–ã€‚ä¸€æ—¦ä»è¿™æ ·çš„æ•°æ®åº“å–å‡ºæ–‡æœ¬ï¼Œå°±åº”è¯¥å°†å…¶è½¬ä¸ºå’Œä¸–ç•Œæ¥è½¨çš„æ ‡å‡†ç¼–ç ã€‚æ— è®ºé‡‡ç”¨å“ªç§æ–¹æ¡ˆï¼Œåœ¨å­˜å‚¨æˆæœ¬è¾ƒé«˜æ—¶ï¼Œäººä»¬å¾€å¾€ä¼šä½¿ç”¨æ— æŸå‹ç¼©ã€‚è¿™æ ·çš„è¯ï¼ŒUTF-8 å’Œ UTF-16 å ç”¨çš„å‚¨å­˜ç©ºé—´å°±å·®ä¸å¤šäº†ã€‚æ­¤å¤–ï¼Œâ€œåœ¨ä¸Šè¿°è¯­è¨€ä¸­ï¼Œä¸€ä¸ªå­—ç¬¦æ¯”ä¸€ä¸ªæ‹‰ä¸å­—ç¬¦å«æœ‰çš„ä¿¡æ¯é‡æ›´å¤§ï¼Œå› æ­¤å…¶å ç”¨æ›´å¤šç©ºé—´æ˜¯åˆæƒ…åˆç†çš„ã€‚â€ï¼ˆTronicï¼Œ<a href="http://programmers.stackexchange.com/a/102211/34925">UTF-16 æ˜¯æœ‰å®³çš„</a>ï¼‰</p>

	<p>è¿™æ˜¯ä¸€ä¸ªç®€å•å®éªŒçš„ç»“æœã€‚ç¬¬ä¸€åˆ—æ˜¯æŸç½‘é¡µï¼ˆã€Šæ—¥æœ¬ã€‹ï¼Œ2012 å¹´ 1 æœˆ 1 æ—¥å–è‡ªæ—¥è¯­ç»´åŸºç™¾ç§‘ï¼‰çš„ HTML æºä»£ç å ç”¨çš„ç©ºé—´ã€‚ç¬¬äºŒåˆ—æ˜¯ç›¸åº”åˆ é™¤æ ‡è®°çš„çº¯æ–‡æœ¬ï¼Œå³â€œå…¨é€‰ã€å¤åˆ¶ã€ç²˜è´´åˆ°çº¯æ–‡æœ¬æ–‡ä»¶â€çš„ç»“æœã€‚</p>

	<table class="basicTable" style="width:100%">
		<tbody>
			<tr><th></th><th>HTML æºä»£ç ï¼ˆä¸ UTF-8 æ¯”è¾ƒï¼‰</th><th>çº¯æ–‡æœ¬ï¼ˆä¸ UTF-8 æ¯”è¾ƒï¼‰</th></tr>
			<tr><th>UTF-8</th><td>767 KB (0%)</td><td>222 KB (0%)</td></tr>
			<tr><th>UTF-16</th><td>1â€‰186 KB (+55%)</td><td>176 KB (âˆ’21%)</td></tr>
			<tr><th>UTF-8ï¼ŒZIP å‹ç¼©</th><td>179 KB (âˆ’77%)</td><td>83 KB (âˆ’63%)</td></tr>
			<tr><th>UTF-16LEï¼ŒZIP å‹ç¼©</th><td>192 KB (âˆ’75%)</td><td>76 KB (âˆ’66%)</td></tr>
			<tr><th>UTF-16BEï¼ŒZIP å‹ç¼©</th><td>194 KB (âˆ’75%)</td><td>77 KB (âˆ’65%)</td></tr>
		</tbody>
	</table>

	<p>å¯ä»¥çœ‹å‡ºï¼ŒUTF-16 å¯¹äºå®é™…æ•°æ®æ¯” UTF-8 å¤šå ç”¨çº¦ 50ï¼… çš„ç©ºé—´ï¼Œå¯¹äºšæ´²è¯­è¨€çº¯æ–‡æœ¬ä¹Ÿä»…ä»…èŠ‚çœäº† 20%ï¼Œå¹¶å¾ˆéš¾è¶…è¶Šé€šç”¨å‹ç¼©ç®—æ³•ã€‚</p>

<h2 id="textops"><a class="aId" href="index.html#textops">å·²ç¼–ç å­—ç¬¦ä¸²ä¸­çš„æ–‡æœ¬æ“ä½œ</a></h2>
	<p>æµè¡Œçš„åŸºäºæ–‡æœ¬çš„æ•°æ®æ ¼å¼ï¼ˆä¾‹å¦‚ CSVã€XMLã€HTMLã€JSONã€RTF å’Œè®¡ç®—æœºç¨‹åºæºä»£ç ï¼‰å¸¸å¸¸åŒ…å« ASCII å­—ç¬¦ä½œä¸ºç»“æ„æ§åˆ¶å…ƒç´ ï¼Œå¹¶ä¸”å¯ä»¥åŒ…å« ASCII å’Œé ASCII çš„æ–‡æœ¬æ•°æ®å­—ç¬¦ä¸²ã€‚ç”¨å¯å˜é•¿ç¼–ç æ¥æ“ä½œå¯èƒ½çœ‹èµ·æ¥å¾ˆå›°éš¾ï¼Œå› ä¸ºå…¶ä¸­ç»§æ‰¿è‡ª ASCII çš„ç ä½æ¯”å…¶ä»–ç ä½çŸ­ï¼Œè€Œå­—ç¬¦ä¸²ä¸­å·²ç¼–ç å­—ç¬¦é—´çš„ç•Œé™ä¸æ˜¯ä¸€æœ›å³çŸ¥ã€‚è¿™æ¨åŠ¨äº†è½¯ä»¶æ¶æ„é€‰æ‹© UCS-4 å®šé•¿ç¼–ç ï¼ˆå¦‚ <a href="index.html#faq.python">Python v3.3</a>ï¼‰ã€‚å…¶å®ï¼Œè¿™æ—¢ä¸å¿…è¦ä¹Ÿä¸èƒ½è§£å†³æˆ‘ä»¬çŸ¥é“çš„ä»»ä½•å®é™…é—®é¢˜ã€‚</p>

	<p>UTF-8 ç¼–ç åœ¨è®¾è®¡ä¸Šä¿è¯äº†ä¸€ä¸ª ASCII å­—ç¬¦æˆ–å­å­—ç¬¦ä¸²æ°¸è¿œä¸ä¼šåŒ¹é…åˆ°ä¸€ä¸ªå¤šå­—èŠ‚ç¼–ç çš„å­—ç¬¦ä¸­é—´ã€‚è¿™åœ¨ UTF-16 ä¸­ä¹Ÿé€‚ç”¨ã€‚è¿™ä¸¤ä¸ªç¼–ç ä¸­ï¼Œå¤šå­—èŠ‚ç¼–ç çš„ç ä½çš„ç¼–ç å•å…ƒä¼šå°† <abbr title="Most Significant Bit, æœ€é«˜æœ‰æ•ˆä½">MSB</abbr> è®¾ä¸º 1ã€‚</p>

	<p>æ¯”å¦‚è¦æ‰¾ HTML æ ‡ç­¾çš„å¼€å§‹è®°å·â€œ&lt;â€ï¼Œæˆ–åœ¨ UTF-8 ç¼–ç çš„ SQL è¯­å¥ä¸­æ‰¾åˆ°å•å¼•å·ï¼ˆ'ï¼‰æ¥é¢„é˜² SQL æ³¨å…¥ï¼Œè¿™å’Œåœ¨å…¨è‹±æ–‡ ASCII æ–‡æœ¬å­—ç¬¦ä¸²ä¸­åšæ³•ä¸€æ ·ã€‚UTF-8 çš„ç¼–ç æ–¹å¼ä¿è¯äº†è¿™è¡Œå¾—é€šã€‚å…·ä½“æ¥è¯´ï¼Œæ¯ä¸€ä¸ªé ASCII å­—ç¬¦åœ¨ UTF-8 ä¸­ä¼šç¼–ç ä¸ºä¸€ç³»åˆ—å­—èŠ‚ï¼Œæ¯ä¸ªå­—èŠ‚çš„å€¼éƒ½å¤§äº 127ã€‚ä¸€ä¸ªæœ´ç´ çš„ç®—æ³•å®Œå…¨æ²¡æœ‰æœºä¼šä¸ä¹‹å†²çªâ€”â€”ç®€å•ã€å¿«é€Ÿã€ä¼˜é›…ï¼Œæ²¡æœ‰å¿…è¦å…³å¿ƒç¼–ç çš„å­—ç¬¦è¾¹ç•Œã€‚</p>

	<p>æ­¤å¤–ï¼Œä½ è¿˜å¯ä»¥åƒåœ¨ç®€å•çš„å­—èŠ‚æ•°ç»„ä¸­ä¸€æ ·ï¼Œç›´æ¥åœ¨ä¸€ä¸ª UTF-8 ç¼–ç çš„å­—ç¬¦ä¸²ä¸­æœç´¢ UTF-8 ç¼–ç çš„é ASCII çš„å­å­—ç¬¦ä¸²â€”â€”æ— éœ€å…³æ³¨ç ä½è¾¹ç•Œã€‚è¿™è¦å½’åŠŸäº UTF-8 çš„å¦ä¸€ä¸ªè®¾è®¡ç‰¹ç‚¹â€”â€”ä¸€ä¸ªç ä½ç¼–ç çš„èµ·å§‹å­—èŠ‚æ°¸è¿œä¸ä¼šä¸å…¶ä»–ç ä½çš„å°¾éšå­—èŠ‚ç›¸åŒã€‚</p>


<h2 id="myths"><a class="aId" href="index.html#myths">æœ‰å…³å­—ç¬¦è®¡æ•°çš„æ›´å¤šè°£è¨€</a></h2>

<p>å‰é¢æˆ‘ä»¬è¯´è¿‡ï¼Œæœ‰ä¸€ç§æµè¡Œçš„è§‚ç‚¹è®¤ä¸ºè®¡æ•°ã€æ‹†åˆ†ã€ç´¢å¼•æˆ–ä»¥å…¶ä»–æ–¹å¼éå† Unicode å­—ç¬¦ä¸²ä¸­çš„ç ä½åº”è¯¥ç®—æ˜¯ä¸€ç§é¢‘ç¹å’Œé‡è¦çš„æ“ä½œã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æ›´è¯¦ç»†åœ°æ¢è®¨è¿™ç‚¹ã€‚</p>

<h3 id="myth.utf16.o1"><a class="aId" href="index.html#myth.utf16.o1">1. å¯ä»¥åœ¨å¸¸æ•°æ—¶é—´å†…å¯¹ UTF-16 ä¸­çš„å­—ç¬¦è®¡æ•°ã€‚</a></h3>

<p>è¿™æ˜¯é‚£äº›è®¤ä¸º UTF-16 æ˜¯å®šé•¿ç¼–ç çš„äººçš„ä¸€ä¸ªå¸¸è§é”™è¯¯ã€‚è¿™æ˜¯é”™çš„ã€‚å®é™…ä¸Š UTF-16 æ˜¯å¯å˜é•¿åº¦ç¼–ç ã€‚å¦‚æœä½ å¦è®¤é BMP å­—ç¬¦çš„å­˜åœ¨ï¼Œè¯·å‚é˜…<a href="index.html#faq.almostfw">è¿™åˆ™å¸¸è§é—®é¢˜</a>ã€‚</p>

<h3 id="myth.utf32.o1"><a class="aId" href="index.html#myth.utf32.o1">2. å¯ä»¥åœ¨å¸¸æ•°æ—¶é—´å†…å¯¹ UTF-32 ä¸­çš„å­—ç¬¦è®¡æ•°ã€‚</a></h3>

<p>è¿™å’Œè¯¯ç”¨â€œå­—ç¬¦â€çš„å®šä¹‰æœ‰å…³ã€‚æˆ‘ä»¬ç¡®å®å¯ä»¥åœ¨å¸¸æ•°æ—¶é—´å†…å¯¹ UTF-32 ä¸­çš„ç¼–ç å•å…ƒå’Œç ä½è®¡æ•°ã€‚ç„¶è€Œï¼Œç ä½å¹¶ä¸å¯¹åº”äºç”¨æˆ·è§‚æ„Ÿå­—ç¬¦ã€‚å³ä½¿æ˜¯åœ¨ Unicode å½¢å¼åŒ–çš„è§„å®šä¸­ï¼Œæœ‰äº›ç ä½å¯¹åº”äºâ€œ<em>å·²ç¼–ç çš„å­—ç¬¦</em>â€ï¼Œæœ‰äº›å¯¹åº”äºâ€œ<em>éå­—ç¬¦</em>â€ã€‚</p>

<h3 id="myth.strlen"><a id="myth.nth.char"></a><a class="aId" href="index.html#myth.strlen">3. å¯¹å·²ç¼–ç çš„å­—ç¬¦æˆ–ç ä½è®¡æ•°å¾ˆé‡è¦ã€‚</a></h3>

<p>æˆ‘ä»¬è®¤ä¸ºï¼Œäººä»¬ç»å¸¸å¤¸å¤§äº†ç ä½çš„é‡è¦æ€§ï¼Œè¿™é€šå¸¸æ˜¯ç”±äºè¯¯è§£äº† Unicode çš„å¤æ‚æ€§ã€‚Unicode ä¹Ÿåªæ˜¯åæ˜ äº†äººç±»è¯­è¨€çš„å¤æ‚æ€§ã€‚æˆ‘ä»¬å¾ˆå®¹æ˜“å°±èƒ½æ•°å‡ºâ€œAbracadabraâ€é‡Œæœ‰å‡ ä¸ªå­—ç¬¦ï¼Œä½†å†æ¥çœ‹è¿™ä¸ªå­—ç¬¦ä¸²ï¼š</p>

<p class="display">ĞŸÑ€Ğ¸Ğ²ĞµÌÑ‚ à¤¨à¤®à¤¸à¥à¤¤à¥‡ ×©Ö¸××œ×•Ö¹×</p>

<p>è¿™é‡ŒåŒ…å«äº† 22 (!) ä¸ªç ä½ï¼Œå´åªæœ‰ 16 ä¸ªå­—ç´ ç¾¤ã€‚å¦‚æœå°†å…¶è½¬æ¢ä¸º <a href="http://unicode.org/reports/tr15/">NFC</a> å½¢å¼ï¼Œå¯ä»¥å‡å°‘åˆ° 20 ä¸ªç ä½ã€‚å³ä½¿è¿™æ ·ï¼Œå…¶ä¸­çš„ç ä½æ•°é‡ä¸å‡ ä¹ä»»ä½•è½¯ä»¶å·¥ç¨‹ä»»åŠ¡æ— å…³ã€‚ä¹Ÿè®¸æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸º UTF-32 æ˜¯å”¯ä¸€ä¸€ä¸ªä¾‹å¤–ã€‚ä¾‹å¦‚ï¼š</p>

<ul>
	<li>å…‰æ ‡ç§»åŠ¨å’Œæ–‡æœ¬é€‰æ‹©ç­‰ï¼Œåº”ä½¿ç”¨â€œ<em>å­—ç´ ç¾¤</em>â€ã€‚ <!-- 5.11 --></li>

	<li>åœ¨é™åˆ¶è¾“å…¥å­—æ®µã€æ–‡ä»¶æ ¼å¼ã€åè®®æˆ–æ•°æ®åº“ä¸­å­—ç¬¦ä¸²çš„é•¿åº¦æ—¶ï¼Œé•¿åº¦å•ä½æ˜¯æŸäº›å·²çŸ¥ç¼–ç çš„<em>ç¼–ç å•å…ƒ</em>ã€‚è¿™é‡Œçš„åŸå› æ˜¯ï¼Œæ— è®ºæ˜¯åœ¨å†…å­˜ã€ç£ç›˜è¿˜æ˜¯æŸä¸€ç‰¹å®šçš„æ•°æ®ç»“æ„ä¸­ï¼Œä»»ä½•é•¿åº¦é™åˆ¶éƒ½æ¥è‡ªäºåº•å±‚ç»™å­—ç¬¦ä¸²åˆ†é…çš„å›ºå®šå¤§å°çš„å‚¨å­˜ç©ºé—´ã€‚</li>

	<li>å±å¹•ä¸Šå­—ç¬¦ä¸²çš„é•¿åº¦ä¸å­—ç¬¦ä¸²çš„ç ä½æ•°é‡æ— å…³ï¼Œéœ€è¦ä»æ¸²æŸ“å¼•æ“é‚£é‡Œå–å¾—ã€‚å³ä½¿æ˜¯ç­‰å®½å­—ä½“å’Œç»ˆç«¯ï¼Œä¸€ä¸ªç ä½ä¹Ÿä¸ä¸€å®šå ä¸€åˆ—ã€‚POSIX è€ƒè™‘åˆ°äº†è¿™ä¸€ç‚¹ã€‚ <!-- POSIX, 3.103 Column Position --></li>
</ul>

<h3 id="myth.nfc"><a class="aId" href="index.html#myth.nfc">4. åœ¨ NFC ä¸­æ¯ä¸ªç ä½å¯¹åº”ä¸€ä¸ªç”¨æˆ·è§‚æ„Ÿå­—ç¬¦ã€‚</a></h3>

<p>é”™ï¼Œå› ä¸º Unicode å¯ä»¥è¡¨ç¤ºå‡ ä¹æ— é™å¤šçš„ç”¨æˆ·è§‚æ„Ÿå­—ç¬¦ã€‚å³ä½¿æ˜¯åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œå¤§å¤šæ•°å­—ç¬¦ä¹Ÿæ²¡æœ‰ä¸€ä¸ªå·²å®Œå…¨ç»„åˆçš„å½¢å¼ã€‚ä¾‹å¦‚ï¼Œä¸Šè¿°ä¾‹å­çš„ NFD å­—ç¬¦ä¸²åŒ…å«äº†ä¸‰ç§<em>çœŸå®</em>è¯­è¨€å†™çš„ä¸‰ä¸ª<em>çœŸå®</em>è¯æ±‡ï¼Œå…¶ NFC å½¢å¼ä¹Ÿç”¨äº† 20 ä¸ªç ä½ã€‚è¿™æ•°é‡è¿˜æ˜¯è¿œè¿œè¶…è¿‡ 16 ä¸ªç”¨æˆ·è§‚æ„Ÿå­—ç¬¦ã€‚</p>

<h3 id="myth.strlen.correctness"><a class="aId" href="index.html#myth.strlen.correctness">5. å–å­—ç¬¦ä¸²é•¿åº¦çš„ <code>length()</code> æ“ä½œå¿…é¡»è®¡ç®—ç”¨æˆ·è§‚æ„Ÿæˆ–å·²ç¼–ç å­—ç¬¦æ•°é‡ï¼Œå¦åˆ™å®ƒå°±æ˜¯æ²¡æœ‰æ­£ç¡®æ”¯æŒ Unicodeã€‚</a></h3>

<p>äººä»¬é€šå¸¸ç”¨â€œå–å­—ç¬¦ä¸²é•¿åº¦â€æ“ä½œè¿”å›çš„æ•°å€¼æ¥è¯„åˆ¤ç¨‹åºåº“å’Œç¼–ç¨‹è¯­è¨€å¯¹ Unicode çš„æ”¯æŒç¨‹åº¦ã€‚æŒ‰ç…§è¿™ä¸ªè¯„åˆ¤æ ‡å‡†ï¼Œå¤§å¤šæ•°æµè¡Œçš„ç¼–ç¨‹è¯­è¨€ï¼Œå¦‚ C#ã€Javaï¼Œç”šè‡³ ICU æœ¬èº«éƒ½ä¸æ”¯æŒ Unicodeã€‚ä¾‹å¦‚ï¼Œå¯¹äºè¿™ä¸ªå•å­—ç¬¦çš„å­—ç¬¦ä¸²â€œğŸ¨â€ï¼Œç”¨ UTF-16 ä½œä¸ºå†…éƒ¨ç¼–ç çš„è¯ï¼Œå…¶é•¿åº¦é€šå¸¸æ˜¯ 2ï¼›è€Œä½¿ç”¨ UTF-8 çš„è¯­è¨€åˆ™ä¼šè®¤ä¸ºå…¶é•¿åº¦æ˜¯ 4ã€‚è¯¯è§£çš„æ ¹æºåœ¨äºï¼Œè¿™äº›è¯­è¨€çš„è§„èŒƒç”¨â€œå­—ç¬¦â€æ¥è¡¨ç¤ºä¸€ä¸ªç¼–ç å•å…ƒï¼Œç¨‹åºå‘˜åˆ™è¯¯ä»¥ä¸ºå®ƒæ˜¯åˆ«çš„ä»€ä¹ˆã€‚</p>

<p>é‚£å°±æ˜¯è¯´ï¼Œè¿™äº› API è¿”å›çš„ç¼–ç å•å…ƒæ•°é‡æœ‰æœ€å¤§çš„å®é™…æ„ä¹‰ã€‚æŠŠä¸€ä¸ª UTF-8 å­—ç¬¦ä¸²å†™å…¥æ–‡ä»¶æ—¶ï¼Œé‡è¦çš„å°±æ˜¯å­—èŠ‚æ•°é‡ã€‚å¦ä¸€æ–¹é¢ï¼Œè®¡ç®—ä»»ä½•å…¶ä»–æ„ä¹‰ä¸Šçš„â€œå­—ç¬¦â€æ•°é‡å°±ä¸æ˜¯å¾ˆæœ‰ç”¨ã€‚</p>

<h2 id="conclusions"><a class="aId" href="index.html#conclusions">æˆ‘ä»¬çš„ç»“è®º</a></h2>

<p>UTF-16 æ˜¯å¯å˜é•¿åº¦ç¼–ç ï¼Œåˆå¤ªå ç©ºé—´ï¼Œåœ¨å„ç§æ„ä¹‰ä¸Šéƒ½æ˜¯æœ€ç³Ÿç³•çš„ã€‚å®ƒåªæ˜¯å› å†å²åŸå› è€Œå­˜åœ¨ï¼Œå¼•å‘äº†æ— æ•°æ··ä¹±ã€‚æˆ‘ä»¬å¸Œæœ›èƒ½è¿›ä¸€æ­¥å‡å°‘å®ƒçš„ä½¿ç”¨ã€‚</p>

<p>ç›¸æ¯”äºå¯¹åŸç”Ÿå¹³å° API çš„äº’æ“ä½œæ€§ï¼Œå¯ç§»æ¤æ€§ã€è·¨å¹³å°å…¼å®¹æ€§å’Œç®€æœ´æ€§æ›´åŠ é‡è¦ã€‚æ‰€ä»¥ï¼Œæœ€å¥½çš„åŠæ³•æ˜¯éšå¤„ä½¿ç”¨ UTF-8 çª„å­—ç¬¦ä¸²ï¼Œåœ¨ç”¨ä¸æ”¯æŒ UTF-8 è€Œæ¥å—å®½å­—ç¬¦ä¸²çš„å¹³å° APIï¼ˆå¦‚ Windows APIï¼‰æ—¶æ¥å›è½¬æ¢ã€‚ä¸å­—ç¬¦ä¸²ç›¸å…³çš„ç³»ç»Ÿ API æ‰“äº¤é“æ—¶ï¼ˆå¦‚ UI ä»£ç å’Œæ–‡ä»¶ç³»ç»Ÿ APIï¼‰ï¼Œ<a href="index.html#faq.cvt.perf">æ€§èƒ½å‡ ä¹ä¸æ˜¯é—®é¢˜</a>ã€‚åœ¨åº”ç”¨ç¨‹åºé‡Œç»Ÿä¸€ç¼–ç æ˜¯è«å¤§çš„ä¼˜åŠ¿ï¼Œ<a href="index.html#faq.liberal">æˆ‘ä»¬æ‰¾ä¸åˆ°å……è¶³çš„ç†ç”±æ¥åé©³</a>ã€‚</p>

<p>è¯´åˆ°æ€§èƒ½ï¼Œè®¡ç®—æœºå¾€å¾€ä½¿ç”¨å­—ç¬¦ä¸²é€šä¿¡ï¼ˆä¾‹å¦‚ HTTP æŠ¥å¤´ã€XMLã€SOAPï¼‰ã€‚å¾ˆå¤šäººè®¤ä¸ºä¸åº”è¯¥ç”¨æ–‡æœ¬é€šä¿¡åè®®ï¼Œä½†å®é™…ä¸Šé€šä¿¡åè®®å‡ ä¹éƒ½ç”¨è‹±è¯­å’Œ ASCII å­—ç¬¦ç»„æˆï¼ŒUTF-8 æ›´æœ‰ä¼˜åŠ¿ã€‚å¯¹ä¸åŒç±»çš„å­—ç¬¦ä¸²ç”¨ä¸ç»Ÿä¸€çš„ç¼–ç ä½¿å¤æ‚åº¦å¤§å¤§ä¸Šå‡ï¼Œæ›´å®¹æ˜“å¼•å‘é—®é¢˜ã€‚</p>

<p>æˆ‘ä»¬å°¤å…¶è®¤ä¸ºç»™ C++ æ ‡å‡†å¢åŠ  <code>wchar_t</code> æ˜¯ä¸€ä¸ªé”™è¯¯ï¼Œç»™ C++11 å¢åŠ  Unicode äº¦ç„¶ã€‚æˆ‘ä»¬æ›´æƒ³è¦ä¸€ä¸ªèƒ½å­˜å‚¨ä»»æ„ Unicode æ•°æ®çš„<em>åŸºæœ¬æ‰§è¡Œå­—ç¬¦é›†</em>ã€‚ç„¶åï¼Œè®©æ¯ä¸€ä¸ª <code>std::string</code> æˆ– <code>char*</code> å‚æ•°éƒ½å…¼å®¹ Unicodeã€‚â€œåªè¦è¿™é‡Œæ¥å—æ–‡æœ¬ï¼Œå°±èƒ½å…¼å®¹ Unicodeâ€â€”â€”æœ‰äº† UTF-8ï¼Œè¿™å°±æ˜¯å°èœä¸€ç¢Ÿã€‚</p>

<p><a href="http://www.boost.org/doc/libs/1_58_0/libs/locale/doc/html/rationale.html">æ ‡å‡†åº“çš„ facet æœ‰ä¸€å †è®¾è®¡ç¼ºé™·</a>ã€‚æ¯”å¦‚ <code>std::numpunct</code>ã€<code>std::moneypunct</code> å’Œ <code>std::ctype</code> ä¸æ”¯æŒå˜é•¿ç¼–ç å­—ç¬¦ï¼ˆUTF-8 çš„é ASCII éƒ¨åˆ†å’Œ UTF-16 çš„é BMP éƒ¨åˆ†ï¼‰ï¼Œä»¥åŠæ²¡æœ‰ä¸ºè½¬æ¢æä¾›è¶³å¤Ÿçš„ä¿¡æ¯ã€‚è¿™äº›é—®é¢˜äºŸå¾…ä¿®å¤ï¼š</p>

<ul>
	<li><code>decimal_point()</code> å’Œ <code>thousands_sep()</code> åº”è¿”å›å­—ç¬¦ä¸²è€Œä¸æ˜¯å•ä¸ªç¼–ç å•å…ƒã€‚C è¯­è¨€çš„ <code>localeconv</code> å‡½æ•°å°±æ˜¯è¿™ä¹ˆåšçš„ï¼Œå°½ç®¡è¿™å‡½æ•°æ— æ³•è‡ªå®šä¹‰ã€‚</li>

	<li><code>toupper()</code> å’Œ <code>tolower()</code> ä¸åº”è¯¥æŒ‰ä¸€ä¸ªç¼–ç å•å…ƒä¸ºä¸€é¡¹ï¼Œå› ä¸ºè¿™æ ·ä¸æ”¯æŒ Unicodeã€‚æ¯”å¦‚æ‹‰ä¸æ–‡ ï¬„ è¿å­—å¿…é¡»è½¬æ¢æˆ FFLï¼Œå¾·æ–‡ ÃŸ è¦è½¬æ¢æˆ SSï¼ˆæœ‰ä¸ªå¤§å†™å½¢å¼ áºï¼Œä½†ä¼ ç»Ÿå¤§å°å†™è§„åˆ™ä¸ç”¨å®ƒï¼‰ã€‚æ­¤å¤–ï¼ŒæŸäº›è¯­è¨€ï¼ˆå¦‚å¸Œè…Šè¯­ï¼‰çš„å°å†™å­—æ¯æœ‰è¯å°¾å˜å½¢ï¼Œæ‰€ä»¥è½¬æ¢ä¾‹ç¨‹å¾—æ³¨æ„åˆ°å­—æ¯çš„ä½ç½®æ‰èƒ½æ­£ç¡®è½¬æ¢å¤§å°å†™ã€‚</li>
</ul>


<h2 id="windows"><a class="aId" href="index.html#windows">å¦‚ä½•åœ¨ Windows ä¸Šå¤„ç†æ–‡æœ¬</a></h2>

<p>æœ¬èŠ‚ä¸»è¦è°ˆè·¨å¹³å°åº“å¼€å‘å’Œ Windows ç¼–ç¨‹ã€‚Windows å¹³å°çš„é—®é¢˜æ˜¯ï¼Œå®ƒçš„çª„å­—ç¬¦ä¸²ç³»ç»Ÿ APIï¼ˆè‡³ä»Šä»ï¼‰ä¸æ”¯æŒ Unicodeã€‚ç»™ Windows API ä¼ é€’ Unicode å­—ç¬¦ä¸²çš„å”¯ä¸€æ–¹æ³•æ˜¯è½¬æ¢ä¸º UTF-16ï¼ˆåˆåå®½å­—ç¬¦ä¸²ï¼‰ã€‚</p>

<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬çš„å‡†åˆ™ä¸å¾®è½¯çš„åŸç‰ˆæŒ‡å—æˆªç„¶ç›¸åã€‚æˆ‘ä»¬çš„æ–¹æ³•æ˜¯åœ¨ä¸´è¿‘ API è°ƒç”¨æ—¶æ‰è½¬æ¢å­—ç¬¦ä¸²ï¼Œè€Œä¸é•¿æœŸæŒæœ‰å®½å­—ç¬¦ä¸²æ•°æ®ã€‚å‰é¢çš„ç« èŠ‚å·²ç»è¯´æ˜ï¼Œè¿™æ ·åšå¯ä»¥æå‡æ€§èƒ½å’Œç¨³å®šæ€§ï¼Œä¿æŒä»£ç ç®€æ´ï¼Œæ›´æœ‰åˆ©äºä¸å…¶ä»–è½¯ä»¶äº¤äº’ã€‚</p>

<ul>
	<li>Do not use <code>wchar_t</code> or <code>std::wstring</code> in any place other than adjacent point to APIs accepting UTF-16.</li>

	<li>Do not use <code>_T(&quot;&quot;)</code> or <code>L&quot;&quot;</code> literals in any place other than parameters to APIs accepting UTF-16.</li>

	<li>Do not use types, functions, or their derivatives that are sensitive to the <code>UNICODE</code> constant, such as <code>LPTSTR</code>, <code>CreateWindow()</code> or the <code>_T()</code>macro. Instead, use <code>LPWSTR</code>, <code>CreateWindowW()</code> and explicit <code>L""</code> literals.</li>

	<li>Yet, <code>UNICODE</code> and <code>_UNICODE</code> are always defined, to avoid passing narrow UTF-8 strings to ANSI WinAPI getting silently compiled. This can be done by VS project settings, under code name <em>Use Unicode character set</em>.</li>

	<li><code>std::string</code> and <code>char*</code> variables are considered UTF-8, anywhere in the program.</li>

	<li>If you have the privilege of writing in C++, the <code>narrow()</code>/<code>widen()</code> conversion functions below can be handy for inline conversion syntax. Of course, any other UTF-8/UTF-16 coversion code would do.</li>

	<li>
		Only use Win32 functions that accept widechars (<code>LPWSTR</code>), never those which accept <code>LPTSTR</code> or <code>LPSTR</code>. Pass parameters this way:
		<pre><code>::SetWindowTextW(widen(someStdString or &quot;string litteral&quot;).c_str())</code></pre>
		The policy uses conversion functions described below. See also, <a href="index.html#faq.cvt.perf">a note on conversion performance</a>.
	</li>

	<li>
		With MFC strings:
		<pre><code>CString someoneElse; // something that arrived from MFC.

// Converted as soon as possible, before passing any further away from the API call:
std::string s = str(boost::format(&quot;Hello %s\n&quot;) % narrow(someoneElse));
AfxMessageBox(widen(s).c_str(), L&quot;Error&quot;, MB_OK);</code></pre>
	</li>

	<li>For .NET developers: using the native UTF-16 based string class may be hard to avoid. Remember that this implementation detail leaks heavily through the interface of this class. For example, <code>string[index]</code> operation may return part of a character (as it would be with a UTF-8 byte array). When serializing strings into output files or communication devices, remember to specify <code>Encoding.UTF8</code>. Be ready to pay the performance penalities for conversion, e.g. in ASP.NET web applications, which typically generate UTF-8 HTML output.</li>
</ul>

<h3 id="how.files"><a class="aId" href="index.html#how.files">Working with files, filenames and fstreams on Windows</a></h3>

<ul>
	<li>Always produce text output files in UTF-8.</li>

	<li>Using <code>fopen()</code> should anyway be avoided for <a href="http://en.wikipedia.org/wiki/RAII">RAII/OOD</a> reasons. However, if necessary, use <code>_wfopen()</code> and WinAPI conventions as described above.</li>

	<li>Never pass <code>std::string</code> or <code>const char*</code> filename arguments to the <code>fstream</code> family. MSVC CRT does not support UTF-8 arguments, but it has a non-standard extension which should be used as follows:</li>

	<li>
		Convert <code>std::string</code> arguments to <code>std::wstring</code> with <code>widen</code>:
		<pre><code>std::ifstream ifs(widen(&quot;hello&quot;), std::ios_base::binary);</code></pre>
		We will have to manually remove the conversion, when MSVCâ€™s attitude to <code>fstream</code> changes.
	</li>

	<li>This code is not multi-platform and may have to be changed manually in the future.</li>

	<li>Alternatively use a set of wrappers that hide the conversions.</li>
</ul>


<h3 id="how.cvt"><a class="aId" href="index.html#how.cvt">Conversion functions</a></h3>

<p>This guideline uses the conversion functions from the <a href="http://cppcms.com/files/nowide/html/">Boost.Nowide library</a> (it is not yet a part of boost):</p>

<pre><code>std::string narrow(const wchar_t *s);
std::wstring widen(const char *s);
std::string narrow(const std::wstring &amp;s);
std::wstring widen(const std::string &amp;s);</code></pre>

<p>The library also provides a set of wrappers for commonly used standard C and C++ library functions that deal with files, as well as means of reading and writing UTF-8 through iostreams.</p>

<p>These functions and wrappers are easy to implement using Windowsâ€™ <code>MultiByteToWideChar</code> and <code>WideCharToMultiByte</code> functions. Any other (possibly faster) conversion routines can be used.</p>


<h2 id="faq"><a class="aId" href="index.html#faq">FAQ</a></h2>

<ol class="faqList">
	<li>
		<h3 id="faq.linuxer"><a class="aId" href="index.html#faq.linuxer">Q: Are you a linuxer? Is this a concealed religious fight against Windows?</a></h3>
		<p>A: No, I grew up on Windows, and I am primarily a Windows developer. I believe Microsoft made a wrong design choice in the text domain, because they did it earlier than others.</p>
	</li>

	<li>
		<h3 id="faq.anglophile"><a id="faq.angle.saxon"></a><a class="aId" href="index.html#faq.anglophile">Q: Are you an Anglophile? Do you secretly think English alphabet and culture are superior to any other?</a></h3>
		<p>A: No, and my country is non-ASCII speaking. I do not think that using a format which encodes ASCII characters in single byte is Anglo-centrism, or has anything to do with human interaction. Even though one can argue that source codes of programs, web pages and XML files, OS file names and other computer-to-computer text interfaces should never have existed, as long as they do exist, text is not always composed for human audiences.</p>
	</li>

	<li>
		<h3 id="faq.why.care"><a class="aId" href="index.html#faq.why.care">Q: Why do you guys care? I program in C# and/or Java and I donâ€™t need to care about encodings at all.</a></h3>

		<p>A: This is false. Both C# and Java offer a 16 bit <code>char</code> type, which is less than a Unicode character, congratulations. The .NET indexer <code>str[i]</code> works in units of the internal representation, hence a leaky abstraction once again. Substring methods will happily return an invalid string, cutting a non-BMP character in parts.</p>

		<p>Furthermore, you have to mind encodings when you are writing your text to files on disk, network communications, external devices, or any place for other program to read from. Please be kind to use <code>System.Text.Encoding.UTF8</code> (.NET) in these cases, never <code>Encoding.ASCII</code>, UTF-16 or cellphone PDU, regardless of the assumptions about the contents.</p>

		<p>Web frameworks like ASP.NET do suffer from the poor choice of internal string representation in the underlying framework: the expected string output (and input) of a web application is nearly always UTF-8, resulting in significant conversion overhead in high-throughput web applications and web services.</p>
	</li>

	<li>
		<h3 id="faq.utf8.fossil"><a class="aId" href="index.html#faq.utf8.fossil">Q: Isnâ€™t UTF-8 merely an attempt to be compatible with ASCII? Why keep this old fossil?</a></h3>
		<p>A: Regardless of whether UTF-8 was originally created as a compatibility hack, today it is a better and a more popular encoding of Unicode than any other.</p>
	</li>

	<li>
		<h3 id="faq.almostfw"><a class="aId" href="index.html#faq.almostfw">Q: UTF-16 characters that take more than two bytes are extremely rare in the real world. This practically makes UTF-16 a fixed-width encoding, giving it a whole bunch of advantages. Canâ€™t we just neglect these characters?</a></h3>
		<p>A: Are you serious about not supporting all of Unicode in your software design? And, if you are going to support it anyway, how does the fact that non-BMP characters are rare practically change anything, except for making software testing harder? What does matter, however, is that text manipulations are relatively rare in real applicationsâ€”compared to just passing strings around as-is. This means the "almost fixed width" has little performance advantage (see Performance), while having shorter strings may be significant.</p>
	</li>

	<li>
		<h3 id="faq.liberal"><a class="aId" href="index.html#faq.liberal">Q: Why not just let any programmer use their favorite encoding internally, as long as they knows how to use it?</a></h3>
		<p>A: We have nothing against correct usage of any encoding. However, it becomes a problem when the same type, such as <code>std::string</code>, means different things in different contexts. While it is â€˜ANSI codepageâ€™ for some, for others, it means â€˜this code is broken and does not support non-English textâ€™. In our programs, it means Unicode-aware UTF-8 string. This diversity is a source of many bugs and much misery. This additional complexity is something the world does not really need. The result is lots of Unicode-broken software, industry-wide. JoelOnSoftware <a href="http://www.joelonsoftware.com/articles/Unicode.html" rel="nofollow">suggests</a> that having every programmer be aware of encodings is the solution to Unicode-broken software. We believe that with one mainstream encoding becoming the default for software APIs, one will be able to write a correct file copy program <a href="index.html#cookie">without being an expert in text and language issues</a>.</p>
	</li>

	<li>
		<h3 id="faq.win.liberal"><a class="aId" href="index.html#faq.win.liberal">Q: My application is GUI-only. It does not do IP communications or file IO. Why should I convert strings back and forth all the time for Windows API calls, instead of simply using wide state variables?</a></h3>
		<p>This is a valid shortcut. Indeed, it may be a legitimate case for using wide strings. But, if you are planning to add some configuration or a log file in future, please consider converting the whole thing to narrow strings. That would be future-proof.</p>
	</li>

	<li>
		<h3 id="faq.def.unicode"><a class="aId" href="index.html#faq.def.unicode">Q: Why do you turn on the <code>UNICODE</code> define, if you do not intend to use Windowsâ€™ <code>LPTSTR</code>/<code>TCHAR</code>/etc macros?</a></h3>
		<p>A: This is an additional safety mechanism against plugging a UTF-8 <code>char*</code> string into ANSI-expecting function variants of Windows API. We want it to generate a compiler error. It is the same kind of a hard-to-find bug as passing an <code>argv[]</code> string to <code>fopen()</code> on Windows: it assumes that the user will never pass non-current-codepage filenames. You will be unlikely to find this kind of a bug by manual testing, unless your testers are trained to supply Chinese file names occasionally, and yet it is a broken program logic. Thanks to the <code>UNICODE</code> define, you get a compiler error for that.</p>
	</li>

	<li>
		<h3 id="faq.naive"><a class="aId" href="index.html#faq.naive">Q: Isnâ€™t it quite naÃ¯ve to think that Microsoft will stop using widechars one day?</a></h3>
		<p>A: Letâ€™s first see when they start supporting <code>CP_UTF8</code> as a valid codepage. This should not be very hard to do. Then, we see no reason why any Windows developer would continue using the widechar APIs. Also, adding support for <code>CP_UTF8</code> would â€˜unbreakâ€™ some of existing unicode-broken programs and libraries.</p>

		<p>Some say that adding <code>CP_UTF8</code> support would <em>break</em> existing applications that use the ANSI API, and that this was supposedly the reason why Microsoft had to resort to creating the wide string API. This is not true. Even some popular ANSI encodings are variable length (Shift JIS, for example), so no correct code would become broken. The reason Microsoft chose UCS-2 is purely historical. Back then UTF-8 hasnâ€™t yet existed, Unicode was believed to be â€˜just a wider ASCIIâ€™, and it was cosidered important to use a fixed-width encoding.</p>
	</li>

	<li>
		<h3 id="faq.boms"><a class="aId" href="index.html#faq.boms">Q: What do you think about Byte Order Marks?</a></h3>
		<p>A: According to the Unicode Standard (v6.2, p.30): <q>Use of a BOM is neither required nor recommended for UTF-8</q>.</p>
		<p>Byte order issues are yet another reason to avoid UTF-16. UTF-8 has no endianness issues, and the UTF-8 BOM exists only to manifest that this is a UTF-8 stream. If UTF-8 remains the only popular encoding (as it already is in the internet world), the BOM becomes redundant. In practice, most UTF-8 text files omit BOMs today.</p>
		<p>Using BOMs would require all existing code to be aware of them, even in simple scenarios as file concatenation. This is unacceptable.</p>
	</li>

	<li>
		<h3 id="faq.crlf"><a class="aId" href="index.html#faq.crlf">Q: What do you think about line endings?</a></h3>
		<p>A: Always use <code>\n (0x0a)</code> line endings, even on Windows. Files should be read and written in binary mode, which guarantees interoperabilityâ€”a program will always give the same output on any system. Since the C and C++ standards use <code>\n</code> as in-memory line endings, this will cause all files to be written in the POSIX convention. It may cause trouble when the file is opened in Notepad on Windows; however, any decent text editor understands such line endings.</p>
		<p>We also prefer SI units, the <a href="https://en.wikipedia.org/?title=ISO_8601" rel="nofollow">ISO-8601</a> date format, and floating point to the <a href="https://en.wikipedia.org/wiki/Decimal_mark#Countries_using_Arabic_numerals_with_decimal_comma" rel="nofollow">floating comma</a>.</p>
	</li>

	<li>
		<h3 id="faq.uni.perf"><a class="aId" href="index.html#faq.uni.perf">Q: But what about performance of text processing algorithms, byte alignment, etc?</a></h3>
		<p>A: Is it really better with UTF-16? Maybe so. ICU uses UTF-16 for historical reasons, thus it is quite hard to measure. However, most of the times strings are treated as cookies, not sorted or reversed every second use. A denser encoding is then favorable for performance.</p>
	</li>

	<li>
		<h3 id="faq.utf16.fault"><a class="aId" href="index.html#faq.utf16.fault">Q: Is it really a fault of UTF-16 that people misuse it, assuming that it is 16 bits per character?</a></h3>
		<p>A: Not really. But yes, safety is an important feature of every design, and encodings are no exception.</p>
	</li>

	<li>
		<h3 id="faq.confuse"><a class="aId" href="index.html#faq.confuse">Q: If <code>std::string</code> means UTF-8, wouldnâ€™t that get confused with code that stores plain text in <code>std::string</code>s?</a></h3>
		<p>A: There is no such thing as plain text. There is no reason for storing codepage-ANSI or ASCII-only text in a class named â€˜stringâ€™.</p>
	</li>

	<li>
		<h3 id="faq.cvt.perf"><a class="aId" href="index.html#faq.cvt.perf">Q: Wonâ€™t the conversions between UTF-8 and UTF-16 when passing strings to Windows slow down my application?</a></h3>

		<p>A: First, you will do <em>some</em> conversion either way. Itâ€™s either when calling the system, or when interacting with the rest of the world, e.g. when sending a text string over TCP. Also, those of OS APIs which accept strings often perform tasks which are inherently slow, such as UI or file system operations. If your interaction with the system APIs dominate your application, here is a little experiment.</p>

		<p>One typical use of the OS APIs is to open files. This function executes in (184â€‰Â±â€‰3)Î¼s on my machine:</p>

		<pre><code>void f(const wchar_t* name)
{
    HANDLE f = CreateFile(name, GENERIC_WRITE, FILE_SHARE_READ, 0, CREATE_ALWAYS, 0, 0);
    DWORD written;
    WriteFile(f, &quot;Hello world!\n&quot;, 13, &amp;written, 0);
    CloseHandle(f);
}</code></pre>

		<p>While this runs in (186â€‰Â±â€‰0.7)Î¼s:</p>

		<pre><code>void f(const char* name)
{
    HANDLE f = CreateFile(widen(name).c_str(), GENERIC_WRITE, FILE_SHARE_READ, 0, CREATE_ALWAYS, 0, 0);
    DWORD written;
    WriteFile(f, &quot;Hello world!\n&quot;, 13, &amp;written, 0);
    CloseHandle(f);
}</code></pre>

		<p>(Run with <code>name=&quot;D:\\a\\test\\subdir\\subsubdir\\this is the sub dir\\a.txt&quot;</code> in both cases. It was averaged over 5 runs. We used an optimized <code>widen</code> that relies on <code>std::string</code> contiguous storage guarantee given by C++11.)</p>

		<p>This is just (1â€‰Â±â€‰2)% overhead. Also, <code>MultiByteToWideChar</code> is not the fastest UTF-8â†”UTF-16 conversion function.</p>
	</li>

	<li>
		<h3 id="faq.literal"><a class="aId" href="index.html#faq.literal">Q: How do I write UTF-8 string literal in my C++ code?</a></h3>

		<p>A: If you internationalize your software then all non-ASCII strings will be loaded from an external translation database, so it is not a problem.</p>

		<p>If you still want to embed a special character you can do it as follows. In C++11 you can do it as:</p>

		<p class="display"><code>u8&quot;âˆƒy âˆ€x Â¬(x â‰º y)&quot;</code></p>

		<p>With compilers that do not support â€˜u8â€™ you can hard-code the UTF-8 code units as follows:</p>

		<p class="display"><code>&quot;\xE2\x88\x83y \xE2\x88\x80x \xC2\xAC(x \xE2\x89\xBA y)&quot;</code></p>

		<p>However the most straightforward way is to just write the string as-is and save the source file encoded in UTF-8:</p>

		<p class="display"><code>&quot;âˆƒy âˆ€x Â¬(x â‰º y)&quot;</code></p>

		<p>Unfortunately, MSVC converts it to some ANSI codepage, corrupting the string. To work around this, save the file in UTF-8 <em>without BOM</em>. MSVC will assume that it is in the correct codepage and will not touch your strings. However, it renders it impossible to use Unicode identifiers and wide string literals (that you will not be using anyway).</p>
	</li>

	<li>
		<h3 id="faq.convert"><a class="aId" href="index.html#faq.convert">Q: I have a complex large char-based Windows application. What is the easiest way to make it Unicode-aware?</a></h3>
		<p>Keep the chars. Define <code>UNICODE</code> and <code>_UNICODE</code> to get compiler errors where <code>narrow()</code>/<code>widen()</code> should be used (this is done automatically by setting <strong>Use Unicode Character Set</strong> in Visual Studio project settings). Find all <code>fstream</code> and <code>fopen()</code> uses, and use wide overloads as described above. By now, you are almost done.</p>
		<p>If you use 3rd-party libraries that do not support Unicode, e.g. forwarding file name strings as-is to <code>fopen()</code>, you will have to work around with tools such as <code>GetShortPathName()</code> as shown above.</p>
	</li>

	<li>
		<h3 id="faq.python"><a class="aId" href="index.html#faq.python">Q: What about Python? I heard they worked hard in v3.3 to support Unicode better.</a></h3>
		<p>A: Perhaps, they should have done less and the support would have been better. In the CPython v3.3 reference implementation, the internal string representation was changed. The UTF-16 was replaced by one of three possible encodings (ISO-8859-1, UCS-2 or UCS-4) depending on the actual string content. To add a single non-ASCII or non-BMP character, the entire string will often be implicitly converted to a different encoding. The internal encoding is transparent to the script. This design is meant to <em>optimize the performance of indexing operations</em> on Unicode code points. However, we argue that counting or indexing code points <a href="index.html#myth.strlen">should not be important</a> for the majority of usesâ€”compared, for instance, to grapheme clusters. To our knowledge, Python currently provides no support of the latter.</p>

		<p>Therefore, we oppose representation-agnostic handling of strings, in favor of representation-transparent API with a UTF-8 internal representation. Indexing operations would be counting code units rather than the code points, as they in fact did before the change. This would also simplify the implementation and also improve performance, e.g. in scripts dealing with the Web, which is already dominated by UTF-8 encoded text, thus making the Python programming language more applicable in the server-side world. One may argue about the safety of string-cutting operations by script programmers, but then again, the same argument is valid for splitting grapheme clusters. Even though Unicode is now fully supported, we believe that Python, as a modern tool with less historical burden to carry, must do better job in text handling.</p>

		<p>Other than that, JPython and IronPython continue to rely on the less fortunate encoding used by their hosting platforms (Java and .NET, respectively) and care must be taken to handle the surrogate pairs correctly there.</p>
	</li>

	<li>
		<h3 id="faq.ood"><a class="aId" href="index.html#faq.ood">Q: But why <code>std::string</code>? Wouldnâ€™t it be a better, object-oriented approach to have a UTF-8 aware string class?</a></h3>
		<p>A: Not every piece of code dealing with strings is actually involved in processing and validation of text. A file copy program which receives Unicode file names and passes them to file IO routines, would do just fine with a simple byte buffer. If you design a library that accepts strings, the simple, standard and lightweight <code>std::string</code> would do just fine. On the contrary, it would be a mistake to reinvent a new string class and force everyone through your peculiar interface. Of course, if one needs more than just passing strings around, he should then use appropriate text processing tools. However, such tools are better to be independent of the storage class used, in the spirit of the container/algorithm separation in the STL. In fact, <a href="http://www.gotw.ca/gotw/084.htm">some consider</a> <code>std::string</code> interface too bloated, as most of it was better to be moved out of the <code>std::string</code> class.</p>
	</li>
	<li>
		<h3 id="faq.whats.now"><a class="aId" href="index.html#faq.whats.now">Q: I already use this approach and I want to make our vision come true. What can I do?</a></h3>
		<p>A: Spread the word.</p>
		<p>Review your code and see what library is most painful to use in portable Unicode-aware code. Open a bug report to the authors. If you are a C or C++ library author, use <code>char*</code> and <code>std::string</code> with UTF-8 implied, and refuse to support ANSI code pagesâ€”since they are inherently Unicode-broken.</p>
		<p>If you are a Microsoft employee, push for implementing support of the <code>CP_UTF8</code> as one of narrow API code pages.</p>
		<p>Further ideas:</p>
		<ul>
			<li>Create a repository for patches of commonly used 3rd-party libraries for UTF-8 support (e.g. PugiXML, LibTIFF, etc.) These are written in standard C and do not care about Windows.</li>
			<li>Create a link-time patch for standard library functions (e.g. <code>fopen()</code>) on Windows, which would do the proper parameter conversion. This can be done for <code>main()</code> and the global environment variables.</li>
		</ul>
	</li>
</ol>


<h2 id="about"><a class="aId" href="index.html#about">About the authors</a></h2>

<p>This manifesto was written by <a href="http://meshnotes.com/9SrRpAypTr8e">Pavel Radzivilovsky</a>, <a href="http://stannum.co.il/about">Yakov Galka</a> and <a href="http://slavanov.com/">Slava Novgorodov</a>. It is a result of our experience and research of real-world Unicode issues and mistakes done by real-world programmers. Our goal here is to improve awareness of text issues and to inspire industry-wide changes to make Unicode-aware programming easier, ultimately improving the experience of users of those programs written by human engineers. Neither of us is involved in the Unicode consortium.</p>

<p>Special thanks to Glenn Linderman for providing information about Python, and to Markus KÃ¼nne, Jelle Geerts and Lazy Rui for reporting bugs and typos in this document.</p>

<p>Much of the text was inspired by <a href="http://programmers.stackexchange.com/questions/102205/should-utf-16-be-considered-harmful">discussions on StackOverflow initiated by Artyom Beilis</a>, the author of Boost.Locale. Additional inspiration came from the development conventions at <a href="http://www.visionmap.com">VisionMap</a> and Michael Hartlâ€™s <a href="http://tauday.com/tau-manifesto">tauday.org</a>.</p>


<h2 id="extern"><a class="aId" href="index.html#extern">External links</a></h2>

<ul>
	<li><a href="http://www.unicode.org/">The Unicode Consortium</a> (The Unicode Standard, <a href="http://www.unicode.org/versions/Unicode6.2.0/UnicodeStandard-6.2.pdf">PDF</a>)</li>

	<li><a href="http://site.icu-project.org/">International Components for Unicode</a> (ICU)</li>

	<li><a href="http://www.joelonsoftware.com/articles/Unicode.html">Joel on Unicode</a>â€”â€˜The Absolute Minimum Every Software Developer Absolutely, Positively Must Know About Unicode and Character Setsâ€™</li>

	<li><a href="http://cppcms.sourceforge.net/boost_locale/html/">Boost.Locale</a>â€”high quality localization facilities in a C++ way.</li>

	<li><a href="http://programmers.stackexchange.com/questions/102205/should-utf-16-be-considered-harmful">Should UTF-16 be considered harmful</a> on StackOverflow, started by Artyom Beilis.</li>

	<li><a href="https://dev.twitter.com/docs/counting-characters">How twitter counts characters</a></li>
</ul>

<h2 id="donate"><a class="aId" href="index.html#donate">Feedback</a></h2>

<p>You can leave comments/feedback on the Facebook <a href="https://www.facebook.com/UTF8Everywhere">UTF-8 Everywhere</a> page. Your help and feedback are much appreciated.</p>

<p style="text-align:center">
<img src="data/utf8donate.png" alt="1UTF8gQmvChQ4MwUHT6XmydjUt9TsuDRn" /><br/>
Bitcoin donate to: 1UTF8gQmvChQ4MwUHT6XmydjUt9TsuDRn<br/>
The cash will be used for research and promotion.
</p>

<table class="layoutTable" style="border-top:1px solid silver; border-bottom:1px solid silver; padding:1ex 0ex; margin:1.5em 0 0.5em 0"><tr>
<td style="text-align:right"><a href="http://utf8everywhere.org/">åŸæ–‡</a>æ›´æ–°æ—¶é—´: 2016-02-07</td>
<td style="text-align:right">è¯‘æ–‡æ›´æ–°æ—¶é—´: 2016-07-18</td>
</tr></table>
</div>

</body>
</html>
